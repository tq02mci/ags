# A股量化交易系统 - GitHub Codespaces + Supabase 架构方案

## 架构概览

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              开发环境 (GitHub Codespaces)                    │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐ │
│  │  VS Code    │  │  Python     │  │  Jupyter    │  │  本地测试服务器      │ │
│  │  Web IDE    │  │  3.11       │  │  Notebook   │  │  FastAPI/Streamlit  │ │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │ PostgreSQL Connection
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              数据层 (Supabase)                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │  PostgreSQL 15                                                         ││
│  │  ├─ 行情数据表 (stock_prices, stock_daily)                              ││
│  │  ├─ 财务数据表 (financial_reports, balance_sheets)                      ││
│  │  ├─ 技术指标表 (technical_indicators)                                   ││
│  │  ├─ 预测结果表 (predictions, backtest_results)                          ││
│  │  └─ 元数据表 (stocks_info, trade_calendar)                              ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │  Supabase Storage (CSV/Parquet 文件存储)                                 ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │  Supabase Edge Functions (轻量级API/定时任务)                            ││
│  └─────────────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │ GitHub Actions
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              部署环境                                        │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │
│  │  Vercel         │  │  Railway/Render │  │  GitHub Pages               │  │
│  │  (前端/Streamlit)│  │  (后端API)      │  │  (文档/报表)                 │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 技术栈

| 层级 | 技术 | 用途 |
|------|------|------|
| 开发环境 | GitHub Codespaces | 云端开发环境，配置即代码 |
| 数据库 | Supabase PostgreSQL | 主数据库，免费额度500MB-8GB |
| 文件存储 | Supabase Storage | 存储模型文件、大规模CSV |
| 后端API | FastAPI + Supabase | RESTful API |
| 前端 | Streamlit | 数据可视化界面 |
| 定时任务 | GitHub Actions | 定时数据获取、模型训练 |
| 模型训练 | GitHub Actions Large Runner | 按需高性能计算 |

## 成本估算

| 服务 | 免费额度 | 超出费用 | 预估月费 |
|------|----------|----------|----------|
| GitHub Codespaces | 120小时/月 | $0.18/小时 | ¥0 (开发) |
| Supabase Database | 500MB-8GB | $0.125/GB | ¥0-50 |
| Supabase Storage | 1GB | $0.021/GB | ¥0-20 |
| GitHub Actions | 2000分钟/月 | $0.008/分钟 | ¥0-100 |
| Vercel/Railway | 按需 | - | ¥0-200 |
| **总计** | - | - | **¥0-370/月** |

## 优势

1. **零成本启动** - 免费额度足够初期开发和轻量运行
2. **开发体验好** - Codespaces 配置即代码，团队环境一致
3. **Git原生集成** - 代码、数据流水线、部署都在GitHub
4. **弹性扩展** - 需要时再购买计算资源
